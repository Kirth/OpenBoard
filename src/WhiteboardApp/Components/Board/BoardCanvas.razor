@using Microsoft.AspNetCore.SignalR.Client
@using Microsoft.JSInterop

<div class="canvas-container">
    <canvas @ref="canvasElement" 
            id="whiteboard-canvas">
    </canvas>
    <!-- Hidden file input for image upload -->
    <input type="file" id="imageUpload" accept="image/*" style="display: none;" />
    <!-- Cursor tracking is now handled by the JavaScript SignalR client -->
</div>

@code {
    [Parameter] public string BoardId { get; set; } = string.Empty;
    [Parameter] public string CurrentUserName { get; set; } = string.Empty;
    [Parameter] public EventCallback<ElementReference> OnCanvasReady { get; set; }

    private ElementReference canvasElement;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await OnCanvasReady.InvokeAsync(canvasElement);
        }
    }

    public ElementReference GetCanvasElement() => canvasElement;
}